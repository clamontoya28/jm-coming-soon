<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iscriviti alla Beta di Harmonia</title>
    <meta name="description" content="Iscriviti per essere tra i primi a provare Harmonia, l'app per il benessere mentale.">
    <link rel="icon" href="annina.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17247002987"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'AW-17247002987');
    </script>
    <!-- Event snippet for Registrazione conversion page -->
    <script>
        gtag('event', 'conversion', {'send_to': 'AW-17247002987/Sh2OCI-lhuAaEOvCgaBA'});
    </script>
    <style>
        :root {
            --harmonia-bg-light: #FDFCFB;
            --harmonia-bg-dark: #272A3D;
            --harmonia-text-light: #333333;
            --harmonia-text-dark: #E8E8EE;
            --harmonia-primary: #82C0CC;
            --harmonia-secondary: #F5A9B8;
            --harmonia-accent: #F9D5A7;
            --harmonia-card-bg-light: rgba(255, 255, 255, 0.95);
            --harmonia-card-bg-dark: rgba(45, 48, 65, 0.9);
            --harmonia-border-light: rgba(130, 192, 204, 0.6);
            --harmonia-border-dark: rgba(130, 192, 204, 0.4);
            --harmonia-primary-rgb: 130, 192, 204;
            --harmonia-success-green: #5cb85c; /* Un verde dolce per successo */
            --harmonia-success-green-rgb: 92, 184, 92;

            --border-radius: 12px;
            --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--harmonia-bg-light);
            color: var(--harmonia-text-light);
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            transition: background-color 0.4s, color 0.4s;
        }
        
        .signup-container {
            background-color: var(--harmonia-card-bg-light);
            padding: 2.5rem 3rem;
            border-radius: var(--border-radius);
            box-shadow: 0 12px 35px rgba(0,0,0,0.08);
            border: 1.5px solid var(--harmonia-primary);
            width: 100%;
            max-width: 550px;
            text-align: center;
            position: relative;
            overflow: hidden; /* Per contenere animazioni */
        }

        .signup-container h1 {
            font-family: 'Playfair Display', serif;
            color: var(--harmonia-primary);
            font-size: 2.2rem;
            margin-bottom: 0.8rem;
        }

        .signup-container p.subtitle {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            opacity: 0.8;
        }

        .beta-form .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .beta-form label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .beta-form input[type="text"],
        .beta-form input[type="email"],
        .beta-form input[type="tel"],
        .beta-form textarea {
            width: 100%;
            padding: 0.9rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--harmonia-border-light);
            background-color: var(--harmonia-bg-light);
            color: var(--harmonia-text-light);
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .beta-form input:focus, .beta-form textarea:focus {
            outline: none;
            border-color: var(--harmonia-primary);
            /* Aggiunge un effetto glow pi√π pronunciato */
            box-shadow: 0 0 0 4px rgba(var(--harmonia-primary-rgb), 0.3), 0 0 15px rgba(var(--harmonia-primary-rgb), 0.2);
        }

        /* Stili per campi invalidi */
        .beta-form input.is-invalid,
        .beta-form textarea.is-invalid {
            border-color: #dc3545; /* Un rosso standard per errori */
            box-shadow: 0 0 0 4px rgba(220, 53, 69, 0.3); /* Glow rosso */
        }
        .beta-form .checkbox-group.is-invalid label {
             color: #dc3545; /* Rende il testo della label rosso */
        }
         .beta-form .checkbox-group.is-invalid input[type="checkbox"] {
             outline: 2px solid #dc3545; /* Aggiunge un contorno rosso alla checkbox stessa */
             outline-offset: 2px;
         }
        .beta-form textarea {
            min-height: 80px;
            resize: vertical;
        }

        .beta-form .checkbox-group {
            display: flex;
            align-items: flex-start; /* Allinea testo e checkbox in alto */
            gap: 0.8rem;
            margin-bottom: 0.8rem;
        }
        
        .beta-form .checkbox-group input[type="checkbox"] {
            width: 1.3em; /* Leggermente pi√π grande */
            height: 1.3em;
            margin-top: 0.2em; /* Allineamento fine */
            accent-color: var(--harmonia-primary);
            cursor: pointer;
        }

        .beta-form .checkbox-group label {
            font-weight: 400;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0; /* Rimuove margine inferiore per allineamento */
            cursor: pointer;
        }

        .btn-submit-beta {
            background-color: var(--harmonia-primary);
            color: white;
            border: none;
            padding: 0.9rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-block;
            margin-top: 1rem;
            box-shadow: 0 6px 15px rgba(var(--harmonia-primary-rgb), 0.3);
        }

        .btn-submit-beta:hover {
            background-color: var(--harmonia-secondary);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(var(--harmonia-primary-rgb), 0.4);
        }
        .btn-submit-beta:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Thank You Section */
        .thankyou-section {
            display: none; /* Nascosto di default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            animation: fadeInSweet 0.8s cubic-bezier(.4,0,.2,1) forwards;
        }

        .thankyou-anim-icon {
            margin-bottom: 1.5rem;
            font-size: 4rem; /* Icona pi√π grande */
            color: var(--harmonia-success-green);
            animation: popIn 0.6s cubic-bezier(.68,-0.55,.27,1.55) 0.2s forwards;
        }
        
        /* Checkmark animation (adattata da index.html) */
        .checkmark-beta {
            width: 90px; 
            height: 90px;
            display: block;
            stroke: var(--harmonia-success-green);
            stroke-width: 3.5; 
            stroke-miterlimit: 10;
            box-shadow: 0 4px 20px rgba(var(--harmonia-success-green-rgb), 0.3);
            border-radius: 50%;
            background: var(--harmonia-card-bg-light);
            margin: 0 auto 1.5rem auto;
            opacity: 0;
            transform: scale(0.5);
            animation: popInCheckmark 0.5s cubic-bezier(.68,-0.55,.27,1.55) 0.2s forwards;
        }
        .checkmark-circle-beta {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 3.5;
            stroke-miterlimit: 10;
            stroke: var(--harmonia-success-green);
            fill: none;
            animation: strokeCircleBeta 0.7s cubic-bezier(.65,.05,.36,1) 0.5s forwards;
        }
        .checkmark-check-beta {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: strokeCheckBeta 0.5s cubic-bezier(.65,.05,.36,1) 1s forwards;
        }

        .thankyou-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--harmonia-success-green);
            margin-bottom: 1rem;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            animation: slideUpFadeIn 0.7s 0.8s forwards;
        }

        .thankyou-message {
            font-size: 1.15rem;
            color: var(--harmonia-text-light);
            text-align: center;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(20px);
            animation: slideUpFadeIn 0.7s 1s forwards;
        }
        .thankyou-message strong {
            color: var(--harmonia-primary);
            font-weight: 600;
        }

        /* Animazioni */
        @keyframes fadeInSweet {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes popInCheckmark {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes strokeCircleBeta { 100% { stroke-dashoffset: 0; } }
        @keyframes strokeCheckBeta { 100% { stroke-dashoffset: 0; } }

        @keyframes slideUpFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Animazione Shake per il pulsante */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-7px); }
            20%, 40%, 60%, 80% { transform: translateX(7px); }
        }
        .shake-animation {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        /* Floating hearts animation */
        .floating-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1; /* Dietro il contenuto */
        }
        .heart {
            position: absolute;
            font-size: 1.5rem; /* Dimensione cuori */
            color: var(--harmonia-secondary);
            opacity: 0;
            animation: floatHeart 8s infinite ease-in-out;
        }
        @keyframes floatHeart {
            0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
        }

        /* Dark Mode */
        body.dark-mode {
            background-color: var(--harmonia-bg-dark);
            color: var(--harmonia-text-dark);
        }
        body.dark-mode .signup-container {
            background-color: var(--harmonia-card-bg-dark);
            box-shadow: 0 12px 35px rgba(0,0,0,0.22);
            border: 1.5px solid var(--harmonia-primary);
        }
        body.dark-mode .beta-form input[type="text"],
        body.dark-mode .beta-form input[type="email"],
        body.dark-mode .beta-form input[type="tel"],
        body.dark-mode .beta-form textarea {
            background-color: var(--harmonia-bg-dark);
            color: var(--harmonia-text-dark);
            border: 1px solid var(--harmonia-border-dark);
        }
        body.dark-mode .beta-form input:focus, 
        body.dark-mode .beta-form textarea:focus {
            border-color: var(--harmonia-primary);
            /* Effetto glow leggermente pi√π visibile in dark mode */
            box-shadow: 0 0 0 4px rgba(var(--harmonia-primary-rgb), 0.4), 0 0 18px rgba(var(--harmonia-primary-rgb), 0.3);
        }
        body.dark-mode .checkmark-beta {
            background: var(--harmonia-card-bg-dark);
            box-shadow: 0 4px 20px rgba(var(--harmonia-success-green-rgb), 0.2);
        }
        body.dark-mode .thankyou-message {
            color: var(--harmonia-text-dark);
        }

        .theme-switch-beta {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 1.5rem;
            color: var(--harmonia-primary);
            cursor: pointer;
            background: none; border: none; padding: 0.5rem;
        }

        @media (max-width: 600px) {
            body { padding: 1rem; }
            .signup-container { padding: 2rem 1.5rem; margin-top: 1rem; }
            .signup-container h1 { font-size: 1.8rem; }
            .signup-container p.subtitle { font-size: 1rem; }
            .beta-form input[type="text"],
            .beta-form input[type="email"],
            .beta-form input[type="tel"],
            .beta-form textarea { padding: 0.8rem; font-size: 0.95rem;}
            .btn-submit-beta { padding: 0.8rem 1.5rem; font-size: 1rem; }
            .thankyou-title { font-size: 1.6rem; }
            .thankyou-message { font-size: 1rem; }
            .checkmark-beta { width: 70px; height: 70px; }
        }

    </style>
</head>
<body>
    <div class="signup-container">
        <button class="theme-switch-beta" id="theme-switch-beta-signup" title="Cambia tema">
            <i class="fas fa-moon"></i> <!-- Icona iniziale, l'etichetta ARIA sar√† impostata da JS -->
        </button>

        <form class="beta-form" id="betaSignupForm">
            <h1>Unisciti alla Beta di Harmonia</h1>
            <p class="subtitle">Sii tra i primi a scoprire un nuovo modo di prenderti cura del tuo benessere mentale.</p>

            <div class="form-group">
                <label for="beta-name">Nome *</label>
                <input type="text" id="beta-name" name="beta_name" required>
            </div>
            <div class="form-group">
                <label for="beta-email">Email *</label>
                <input type="email" id="beta-email" name="beta_email" required>
            </div>
            <div class="form-group">
                <label for="beta-phone">Numero di Telefono (Opzionale)</label>
                <input type="tel" id="beta-phone" name="beta_phone">
            </div>
            <div class="form-group">
                <label for="beta-motivation">Motivazione (Opzionale)</label>
                <textarea id="beta-motivation" name="beta_motivation" placeholder="Perch√© vorresti provare Harmonia?"></textarea>
            </div>
            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="beta-confirm" name="beta_confirm" required>
                    <label for="beta-confirm">Confermo di voler far parte del programma Beta di Harmonia e di comprendere che l'app √® in fase di sviluppo. *</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="beta-newsletter" name="beta_newsletter">
                    <label for="beta-newsletter">Accetto che la mia mail venga registrata per ricevere news e aggiornamenti su Harmonia e J.M Enterprises.</label>
                </div>
            </div>
            <button type="submit" class="btn-submit-beta" id="submitBtn">Invia Richiesta</button>
        </form>

        <div class="thankyou-section" id="thankYouSection" aria-live="assertive" role="status">
            <div class="floating-hearts" id="floatingHeartsContainer"></div>
            <!-- <div class="thankyou-anim-icon"><i class="fas fa-heartbeat"></i></div> -->
            <svg class="checkmark-beta" viewBox="0 0 52 52">
                <circle class="checkmark-circle-beta" cx="26" cy="26" r="25" fill="none"/>
                <path class="checkmark-check-beta" fill="none" d="M14 27l7 7 16-16"/>
            </svg>
            <h2 class="thankyou-title" id="thankYouTitleText">Grazie di cuore!</h2>
            <p class="thankyou-message" id="thankYouMessageText">La tua richiesta √® stata inviata. Ti contatteremo presto con i prossimi passi! üíñ</p>
        </div>
    </div>

    <script>
        const themeSwitchBeta = document.getElementById('theme-switch-beta-signup');
        const body = document.body;

        function setBetaSignupTheme(isDark) {
            body.classList.toggle('dark-mode', isDark);
            const newIconHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            const newAriaLabel = isDark ? 'Attiva tema chiaro' : 'Attiva tema scuro';
            themeSwitchBeta.innerHTML = newIconHTML;
            themeSwitchBeta.setAttribute('aria-label', newAriaLabel);
            themeSwitchBeta.title = newAriaLabel; // Aggiorna anche il title per coerenza
            localStorage.setItem('harmoniaBetaSignupTheme', isDark ? 'dark' : 'light');
        }

        const currentBetaSignupTheme = localStorage.getItem('harmoniaBetaSignupTheme');
        if (currentBetaSignupTheme === 'dark') {
            setBetaSignupTheme(true);
        } else {
            setBetaSignupTheme(false);
        }

        themeSwitchBeta.addEventListener('click', () => {
            setBetaSignupTheme(!body.classList.contains('dark-mode'));
        });

        const betaForm = document.getElementById('betaSignupForm');
        const thankYouSection = document.getElementById('thankYouSection');
        const thankYouTitleText = document.getElementById('thankYouTitleText');
        const thankYouMessageText = document.getElementById('thankYouMessageText');
        const submitButton = document.getElementById('submitBtn');

        // Funzione per rimuovere la classe di errore da tutti i campi
        function clearValidationErrors() {
            document.querySelectorAll('.beta-form input, .beta-form textarea, .beta-form .checkbox-group').forEach(el => {
                el.classList.remove('is-invalid');
            });
        }

        betaForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const nameInput = document.getElementById('beta-name');
            const emailInput = document.getElementById('beta-email');
            const confirmCheckbox = document.getElementById('beta-confirm');
            const confirmCheckboxGroup = confirmCheckbox.closest('.checkbox-group');
            const userName = nameInput.value.trim();

            if (!confirmCheckbox.checked) {
                alert("Devi confermare di voler far parte del programma Beta.");
                confirmCheckbox.focus();
                submitButton.classList.add('shake-animation');
                setTimeout(() => submitButton.classList.remove('shake-animation'), 500);
                return;
            }

            // Rimuovi errori precedenti
            clearValidationErrors();

            let isValid = true;

            if (!nameInput.value.trim()) {
                nameInput.classList.add('is-invalid');
                nameInput.focus();
                isValid = false;
            }
            if (!emailInput.value.trim()) {
                // L'input type="email" ha una sua validazione di formato, qui controlliamo solo se √® vuoto.
                emailInput.classList.add('is-invalid');
                emailInput.focus();
                isValid = false;
            }
            if (!confirmCheckbox.checked) {
                confirmCheckboxGroup.classList.add('is-invalid');
                isValid = false;
            }
            
            submitButton.disabled = true;
            submitButton.textContent = "Invio in corso...";

            // Simula invio dati (sostituire con invio reale se necessario)
            setTimeout(() => {
                betaForm.style.display = 'none';
                thankYouTitleText.textContent = `Grazie di cuore, ${userName}!`;
                thankYouMessageText.innerHTML = `La tua richiesta per la beta di Harmonia √® stata inviata con successo. <br>Ti contatteremo presto all'indirizzo email fornito con i prossimi passi! üíñ`;
                thankYouSection.style.display = 'flex';

                // Confetti!
                if (typeof confetti === 'function') {
                    confetti({
                        particleCount: 150,
                        spread: 90,
                        origin: { y: 0.6 },
                        colors: ['#82C0CC', '#F5A9B8', '#F9D5A7', '#FFFFFF']
                    });
                     // More confetti for a sweeter effect
                    setTimeout(() => confetti({ particleCount: 100, spread: 120, startVelocity: 25, origin: { x: 0, y: 0.5 }, colors: ['#82C0CC', '#F5A9B8'] }), 200);
                    setTimeout(() => confetti({ particleCount: 100, spread: 120, startVelocity: 25, origin: { x: 1, y: 0.5 }, colors: ['#82C0CC', '#F5A9B8'] }), 400);
                }
                
                // Floating hearts
                createFloatingHearts();

            }, 1200); // Simula ritardo di rete
        });

        // Rimuovi la classe is-invalid quando l'utente interagisce con il campo
        document.querySelectorAll('.beta-form input:not([type="checkbox"]), .beta-form textarea').forEach(input => {
            input.addEventListener('input', () => {
                input.classList.remove('is-invalid');
            });
            input.addEventListener('focus', () => {
                input.classList.remove('is-invalid');
            });
        });
        document.getElementById('beta-confirm').addEventListener('change', () => {
             document.getElementById('beta-confirm').closest('.checkbox-group').classList.remove('is-invalid');
        });
        function createFloatingHearts() {
            const container = document.getElementById('floatingHeartsContainer');
            if (!container) return;
            container.innerHTML = ''; // Pulisci cuori precedenti
            for (let i = 0; i < 15; i++) { // Numero di cuori
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = '&#10084;'; // Codice HTML per il cuore
                heart.style.left = Math.random() * 100 + '%'; // Usa % per essere relativo al container
                heart.style.animationDuration = (Math.random() * 3 + 5) + 's'; // Durata variabile
                heart.style.animationDelay = (Math.random() * 4) + 's'; // Ritardo variabile
                heart.style.fontSize = (Math.random() * 1 + 0.8) + 'rem'; // Dimensione variabile
                container.appendChild(heart);
            }
        }
    </script>
</body>
</html>